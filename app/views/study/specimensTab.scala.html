@(studyId: String,
  studyName: String,
  specimenGroups: Set[org.biobank.domain.study.SpecimenGroup])(implicit request: play.api.mvc.WrappedRequest[play.api.mvc.AnyContent],
    flash: play.api.mvc.Flash)

@import tags._
@import org.biobank.controllers.study._

<h4>
  @Messages("biobank.study.specimen.group.show.title")
  <a href="@routes.SpecimenGroupController.addSpecimenGroup(studyId, studyName)"
            class="btn btn-small btn-primary" type="button"
            data-toggle="tooltip" title="@Messages("biobank.common.action.add")">
            <i class="icon-plus-sign icon-white"></i></a>
</h4>
@if(specimenGroups.size <= 0) {
  @alertBlock{ }{ @Messages("biobank.study.specimen.group.show.none") }
} else {
  <table class="table table-bordered table-hover table-condensed">
  <thead>
    <th>@Messages("biobank.common.name")</th>
    <th>@Messages("biobank.study.specimen.group.field.units")</th>
    <th>@Messages("biobank.study.specimen.group.field.anatomicalsource")</th>
    <th>@Messages("biobank.study.specimen.group.field.preservation")</th>
    <th>@Messages("biobank.study.specimen.group.field.preservationtemperature")</th>
    <th>@Messages("biobank.study.specimen.group.field.specimentype")</th>
    <th></th>
  </thead>
  <tbody>
  @for(sg <- specimenGroups) {
    <tr>
    <td>@nameWithDescriptionPopup(sg.id.id, sg.name, sg.description)</td>
    <td>@sg.units</td>
    <td>@sg.anatomicalSourceType</td>
    <td>@sg.preservationType</td>
    <td>@sg.preservationTemperatureType</td>
    <td>@sg.specimenType</td>
    <td>
    @updateRemoveButtons(
      routes.SpecimenGroupController.updateSpecimenGroup(studyId,studyName,sg.id.id),
      routes.SpecimenGroupController.removeSpecimenGroup(studyId,studyName,sg.id.id))
    </td>
    <tr>
  }
  </tbody>
  </table>

  <script type="text/javascript" charset="utf-8">
      @Html(specimenGroups.map(sg => """$('#%s').popover();""".format(sg.id)).mkString("\n"))
  </script>
}
