@(studyForm: Form[org.biobank.controllers.study.StudyFormObject],
    formType: org.biobank.controllers.FormType,
    studyId: String)(implicit request: play.api.mvc.WrappedRequest[play.api.mvc.AnyContent])

@import helper._
@import tags._
@import org.biobank.controllers.{FormType, AddFormType, UpdateFormType, FormInfo}
@import org.biobank.controllers.study._

@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.f) }

@formInfo = @{ formType match {
    case org.biobank.controllers.AddFormType() =>
        FormInfo(Messages("biobank.study.add"), routes.StudyController.addStudySubmit)
    case org.biobank.controllers.UpdateFormType() =>
        FormInfo(Messages("biobank.study.update"), routes.StudyController.updateStudySubmit(studyId))
}}

@breadcrumbs = @{ Map(
    (Messages("biobank.study.plural") -> routes.StudyController.index),
    (formInfo.title -> null)
  ) }

@main(formInfo.title, breadcrumbs) {
  <div class="page-header">
      <h2>@formInfo.title</h2>
  </div>
  <div class="clearfix">
    @form(formInfo.action, args = 'id -> "studyForm", 'class -> "form-horizontal") {

    @formType match {
        case org.biobank.controllers.AddFormType() => {
            <input type="hidden" name="studyId" value="dont-care" >
            <input type="hidden" name="version" value="-1" >
            }
        case org.biobank.controllers.UpdateFormType() => {
            <input type="hidden" name="studyId" value="@studyForm("studyId").value" >
            <input type="hidden" name="version" value="@studyForm("version").value" >
            }
    }

    @formNameAndDescription(studyForm("name"), studyForm("description"))

    @submitCancelFormButtons(routes.StudyController.index)
    }
</div>
}

