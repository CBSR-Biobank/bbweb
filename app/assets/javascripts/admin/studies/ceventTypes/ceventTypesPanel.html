<uib-accordion-group is-open="vm.panelOpen" style="margin-top: 10px;">
  <uib-accordion-heading>
    Collection Event Types
    <panel-buttons on-add="vm.add()"
                   add-button-title="add collection event type"
                   add-button-enabled="vm.modificationsAllowed"
                   panel-open="vm.panelOpen">
    </panel-buttons>
  </uib-accordion-heading>
  <p>
    A Collection Event Type defines a classification name, unique to the Study, to a
    participant visit. A participant visit is a record of when specimens were collected
    from a participant at a collection centre.
  </p>
  <div class="panel panel-warning" ng-if="vm.ceventTypes.length <= 0">
    <div class="panel-heading">
      Collection event types have not been defined for this study yet.
    </div>
  </div>
  <p ng-if="vm.ceventTypes.length > 0">
    The following collection event types are defined:
  </p>
  <table ng-show="vm.ceventTypes.length > 0"
         class="table table-condensed table-hover"
         st-table="vm.ceventTypes">
    <thead>
      <th st-sort="name">Name</th>
      <th>Specimen Groups</th>
      <th>Annotation Types</th>
      <th st-sort="recurring">Recurring</th>
      <th st-sort="description">Description</th>
      <th></th>
    </thead>
    <tbody>
      <tr ng-repeat="ceventType in vm.ceventTypes">
        <td>
          <span ng-click="vm.information(ceventType)">
            <a href>{{ceventType.name}}</a>
          </span>
        </td>

        <!-- SPECIMEN GROUP DATA -->
        <td>
          <span ng-repeat="sgItemId in ceventType.specimenGroupDataIds()">
            <a href ng-click="vm.viewSpecimenGroup(sgItemId)">
              {{ceventType.getSpecimenGroupDataById(sgItemId).specimenGroup.name}}
            </a>
            <span ng-if="!$last">, </span>
          </span>
        </td>

        <!-- ANNOTATION TYPE DATA -->
        <td>
          <span ng-repeat="atItemId in ceventType.annotationTypeDataIds()">
            <a href ng-click="vm.viewAnnotationType(atItemId)">
              {{ceventType.getAnnotationTypeDataById(atItemId).annotationType.name}}
            </a>
            <span ng-if="!$last">, </span>
          </span>

        </td>
        <td>
          {{ceventType.recurring ? 'Y' : 'N'}}
        </td>
        <td>
          {{ceventType.description === null ? "" : ceventType.description | truncate:40}}
        </td>
        <td ng-if="vm.modificationsAllowed">
          <update-remove-buttons
             on-update="vm.update(ceventType)"
             on-remove="vm.remove(ceventType)"
             update-button-enabled="vm.modificationsAllowed"
             remove-button-enabled="vm.modificationsAllowed">
          </update-remove-buttons>
        </td>
      </tr>
    </tbody>
  </table>
</uib-accordion-group>
